<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Query Logs</title>
    <style>
        pre { background-color: #f9f9f9; padding: 10px; border: 1px solid #ccc; overflow-x: auto; }
        .log-entry { margin-bottom: 30px; border-bottom: 1px solid #ddd; padding-bottom: 15px; }
    </style>
</head>
<body>
    <h1>All Query Logs</h1>

    {% if logs %}
        {% for trace in logs %}
            <div class="log-entry">
                <h2>Query: {{ trace.query }}</h2>
                <h3>Planner Output</h3>
                <pre>{{ trace.planner_output | tojson(indent=2) }}</pre>

                <h3>Tool Calls</h3>
                {% for call in trace.tool_calls %}
                    <h4>Tool: {{ call.tool_name }}</h4>
                    <strong>Arguments:</strong>
                    <pre>{{ call.args | tojson(indent=2) }}</pre>
                    <strong>Response:</strong>
                    <pre>{{ call.response }}</pre>
                {% endfor %}

                <h3>Final Answer</h3>
                <pre>{{ trace.final_answer }}</pre>
            </div>
        {% endfor %}
    {% else %}
        <p>No logs available.</p>
    {% endif %}

    <p><a href="{{ url_for('index') }}">Back to Query</a></p>
</body>
</html>
